# Disillusion-Rus

Русификатор для игры [Disillusion](https://store.steampowered.com/app/1490060).  
Буду рад *звёздочке ⭐* на этом репозитории.

Поддержать автора перевода можно здесь:  
https://boosty.to/faetterp

---

![2024-04-19_014959](https://github.com/FaetterP/Disillusion-Rus/assets/56697273/82db48e7-65cb-4579-bcb9-e926dbbe6b72)
![2024-04-19_015131](https://github.com/FaetterP/Disillusion-Rus/assets/56697273/e528087c-412f-472b-9965-0d9b39db3ce6)

## Установка

Для запуска игра использует файл `.rgss3a`. Его получение сложное, поэтому оставляю ссылку на готовый файл.  
https://drive.google.com/drive/folders/1yp3F299wmwY7pQe4DPUfdLFHhU33SHkD?usp=drive_link

1) Нужно скачать архив по ссылке выше.

2) Для этого в библиотеке находим игру, нажимаем ПКМ и выбираем `Управление → Просмотреть локальные файлы`.  
![image](https://github.com/FaetterP/Disillusion-Rus/assets/56697273/cf2b574e-f3cc-4da1-88f3-c76227b659ec)

3) Переместить с заменой файлы из архива в папку с игрой.

## Получение файла .rgss3a

Выше уже есть готовый файл, но ниже будет способ его получения.  
Получение состоит из двух этапов. Сначала нужно будет *распаковать* файлы игры и получить их в удобном для редактирования виде. Далее нужно обратно *запаковать* их, чтобы игра запустилась.

### Распаковка

+ При скачивании игры через Steam в папке с игрой есть файл `Game.rgss3a`. Это зашифрованный архив со всеми данными (локации, предметы, враги). Чтобы его распаковать я использовал утилиту [RGSS Extractor](https://github.com/KatyushaScarlet/RGSS-Extractor/releases).  
+ В ней нужно открыть этот файл и извлечь две папки: **Data** и **Graphics**. Эти папки появятся в папке с утилитой.  
+ После распаковки можно заметить файлы `.rvdata2`. Это файлы данных для *RPG Maker VX Ace*.  
+ Далее нужно создать новый проект в RPG MAKER VX Ace и перейти в папку с этим проектом. Сюда нужно переместить **все файлы игры из стима** и папки, полученные после распаковки rgss3a: **Data** и **Graphics**.
+ Если всё сделано правильно, в проект можно будет перезайти, и он не упадёт с ошибкой.  
+ Дальше можно менять все файлы через графический интегрфейс самой программы, но при таком подходе сложно вести историю файлов.  
+ Чтобы превратить файлы `rvdata2` в читаемый вид я использую утилиту [rvpacker](https://github.com/Solistra/rvpacker). Но в коде этого гема допущена ошибка, потому что используемого метода не существует. Нужно перейти в исходный код этого пакета и исправить ошибку.

### Перевод и запаковка

+ Для перевода нужно скачать этот репозиторий и переместить папки **YAML** и ***остальные*** в папку с проектом на RPG Maker.
+ Теперь нужно удалить папку `Data` и оставшийся со стима файл `Game.rgss3a`.
+ Далеее нужно открыть в этот папке cmd и запустить команду `rvpacker --action pack --project . --project-type ace`.
+ После этого будет неплохо проверить, что в проект всё ещё можно перезайти и запустить его.
+ Если всё правильно, то в главном меню должен быть русский текст.
+ Дальше нужно создать билд игры с зашифрованными данными. Для этого в RPG Maker нужно выбрать `File → Compress Game Data...`. В появившемся окне поставить галочку `Create Encrypted Archive` и нажать `Ok`. После нескольких минут в указанном месте появится самораспаковывающийся `.exe`. Но если открыть его через 7-Zip, то там и будет перепрошитый `Game.rgss3a` с русским языком.
